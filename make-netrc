#!/bin/bash
set -eux

# Note that, whatever the region we will be working in, the GitHub creds are in us-east-1
GITUSER=$(aws ssm get-parameter --region us-east-1 --name /excellaco/user --query 'Parameter.Value' --out text)
GITPASS=$(aws ssm get-parameter --region us-east-1 --name /excellaco/tkn --query 'Parameter.Value' --with-decryption --out text)
cat << EOF > .netrc
# Auto-generated by make-netrc $(date)
machine github.com
  login $GITUSER
  password $GITPASS
EOF
